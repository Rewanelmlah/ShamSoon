import 'package:flutter/material.dart';
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'package:shamsoon/core/shared/base_model.dart';
import 'package:shamsoon/core/widgets/easy_pagination.dart';
import 'package:shamsoon/features/notifications/data/data_source.dart';
import 'package:shamsoon/features/notifications/data/models/notification_model.dart';
import 'package:shamsoon/features/notifications/presentation/widgets/notification_container.dart';
class NotificationScreen extends StatelessWidget {
  NotificationScreen({super.key});

  final EasyPaginationController<NotificationModel> _controller = EasyPaginationController();
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        centerTitle: true,
        leading: IconButton(
          onPressed: () {
            Navigator.pop(context);
          },
          icon: Icon(Icons.arrow_back_ios, size: 24.sp),
        ),
        title: Text(
          "Notifications",
          style: TextStyle(fontSize: 24.sp, fontWeight: FontWeight.bold),
        ),
      ),
      body: Padding(
        padding: EdgeInsets.all(14.w),
        child: EasyPagination<BaseModel<GetNotificationsResponse>, NotificationModel>.listView(
          controller: _controller,
          asyncCall: (currentPage) async => await NotificationDataSource().getNotifications(currentPage),
          mapper: (response) => DataListAndPaginationData(
              data: response.data.notifications,
                paginationData: PaginationData(totalPages: response.data.totalPagesNumber)
          ),
          errorMapper: ErrorMapper(errorWhenDio: (e) => e.response?.data['message'],),
          itemBuilder: (data, index) => CustomNotificationTile(title: 'Your panel needs cleaning!', onTap: () {}),
        ),
      ),
    );
  }
}